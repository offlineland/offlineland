<!DOCTYPE html>
<html lang="en">
    <body>
        <script src="/static/libs/redom.js"></script>
        <script type="module">
            import { registerServiceWorker } from "/static/register-service-worker.js"
            const { el, mount } = globalThis.redom;

            registerServiceWorker()

            // TODO: use indexedDB instead?
            const dataRes = await fetch("/_mlspinternal_/getdata");
            const data = await dataRes.json();

            const main = el("main", [
                el("h1", "Hello world!"),
                el("div", [
                    el("h2", "available areas"),
                    el("ul", [
                        el("li", [ el("a", { href: "/offlineland"}, "offlineland") ]),
                        data.availableAreas.map((areaUrlName) => (
                            el("li", [
                                el("a", { href: "/" + areaUrlName}, areaUrlName),
                                data.areasStoredLocally.includes(areaUrlName) || el("button", "download area")
                            ])
                        ))
                    ]),
                ]),
            ])
            mount(document.body, main);
        </script>
    </body>
</html>
